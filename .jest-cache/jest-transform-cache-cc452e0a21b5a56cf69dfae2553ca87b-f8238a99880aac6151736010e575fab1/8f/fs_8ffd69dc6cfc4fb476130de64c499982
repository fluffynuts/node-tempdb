aa9abf0b1ac3854546f55ccb775d2640
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.fs = void 0;
const fs_1 = require("fs");
const path_1 = __importDefault(require("path"));
const textFileOptions = { encoding: "utf8" };
async function testPath(at, fn) {
    try {
        const st = await fs_1.promises.stat(at);
        return fn(st);
    }
    catch (e) {
        return false;
    }
}
function fileExists(at) {
    return testPath(at, st => st.isFile());
}
function folderExists(at) {
    return testPath(at, st => st.isDirectory());
}
async function readTextFile(at) {
    return (await fs_1.promises.readFile(at, textFileOptions));
}
async function writeTextFile(at, contents) {
    const folder = path_1.default.dirname(at);
    if (!(await folderExists(folder))) {
        await fs_1.promises.mkdir(folder);
    }
    await fs_1.promises.writeFile(at, contents, textFileOptions);
}
exports.fs = {
    ...fs_1.promises,
    fileExists,
    folderExists,
    readTextFile,
    writeTextFile
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXGNvZGVcXG9wZW5zb3VyY2VcXG5vZGUtdGVtcGRiXFxzcmNcXGZzLnRzIiwic291cmNlcyI6WyJDOlxcY29kZVxcb3BlbnNvdXJjZVxcbm9kZS10ZW1wZGJcXHNyY1xcZnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsMkJBQWdEO0FBQ2hELGdEQUF3QjtBQUV4QixNQUFNLGVBQWUsR0FBRyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsQ0FBQztBQUU3QyxLQUFLLFVBQVUsUUFBUSxDQUFDLEVBQVUsRUFBRSxFQUFtQztJQUNuRSxJQUFJO1FBQ0EsTUFBTSxFQUFFLEdBQUcsTUFBTSxhQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzlCLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQ2pCO0lBQUMsT0FBTyxDQUFDLEVBQUU7UUFDUixPQUFPLEtBQUssQ0FBQztLQUNoQjtBQUNMLENBQUM7QUFFRCxTQUFTLFVBQVUsQ0FBQyxFQUFVO0lBQzFCLE9BQU8sUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO0FBQzNDLENBQUM7QUFFRCxTQUFTLFlBQVksQ0FBQyxFQUFVO0lBQzVCLE9BQU8sUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO0FBQ2hELENBQUM7QUFFRCxLQUFLLFVBQVUsWUFBWSxDQUFDLEVBQVU7SUFDbEMsT0FBTyxDQUFDLE1BQU0sYUFBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsZUFBZSxDQUFDLENBQVcsQ0FBQztBQUMvRCxDQUFDO0FBRUQsS0FBSyxVQUFVLGFBQWEsQ0FBQyxFQUFVLEVBQUUsUUFBZ0I7SUFDckQsTUFBTSxNQUFNLEdBQUcsY0FBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNoQyxJQUFJLENBQUMsQ0FBQyxNQUFNLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFO1FBQy9CLE1BQU0sYUFBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQTtLQUMxQjtJQUNELE1BQU0sYUFBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsUUFBUSxFQUFFLGVBQWUsQ0FBQyxDQUFDO0FBQ3ZELENBQUM7QUFFWSxRQUFBLEVBQUUsR0FBRztJQUNkLEdBQUcsYUFBRztJQUNOLFVBQVU7SUFDVixZQUFZO0lBQ1osWUFBWTtJQUNaLGFBQWE7Q0FDaEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByb21pc2VzIGFzIF9mcywgU3RhdHNCYXNlIH0gZnJvbSBcImZzXCI7XHJcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XHJcblxyXG5jb25zdCB0ZXh0RmlsZU9wdGlvbnMgPSB7IGVuY29kaW5nOiBcInV0ZjhcIiB9O1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gdGVzdFBhdGgoYXQ6IHN0cmluZywgZm46IChzdDogU3RhdHNCYXNlPGFueT4pID0+IGJvb2xlYW4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgc3QgPSBhd2FpdCBfZnMuc3RhdChhdCk7XHJcbiAgICAgICAgcmV0dXJuIGZuKHN0KTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbGVFeGlzdHMoYXQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgcmV0dXJuIHRlc3RQYXRoKGF0LCBzdCA9PiBzdC5pc0ZpbGUoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvbGRlckV4aXN0cyhhdDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICByZXR1cm4gdGVzdFBhdGgoYXQsIHN0ID0+IHN0LmlzRGlyZWN0b3J5KCkpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiByZWFkVGV4dEZpbGUoYXQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICByZXR1cm4gKGF3YWl0IF9mcy5yZWFkRmlsZShhdCwgdGV4dEZpbGVPcHRpb25zKSkgYXMgc3RyaW5nO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiB3cml0ZVRleHRGaWxlKGF0OiBzdHJpbmcsIGNvbnRlbnRzOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IGZvbGRlciA9IHBhdGguZGlybmFtZShhdCk7XHJcbiAgICBpZiAoIShhd2FpdCBmb2xkZXJFeGlzdHMoZm9sZGVyKSkpIHtcclxuICAgICAgICBhd2FpdCBfZnMubWtkaXIoZm9sZGVyKVxyXG4gICAgfVxyXG4gICAgYXdhaXQgX2ZzLndyaXRlRmlsZShhdCwgY29udGVudHMsIHRleHRGaWxlT3B0aW9ucyk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmcyA9IHtcclxuICAgIC4uLl9mcyxcclxuICAgIGZpbGVFeGlzdHMsXHJcbiAgICBmb2xkZXJFeGlzdHMsXHJcbiAgICByZWFkVGV4dEZpbGUsXHJcbiAgICB3cml0ZVRleHRGaWxlXHJcbn07XHJcbiJdfQ==